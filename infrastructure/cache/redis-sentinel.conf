# Redis Sentinel Configuration for TechNovaStore

# Basic settings
port 26379
bind 0.0.0.0
protected-mode no

# Sentinel settings
sentinel announce-ip ${REDIS_SENTINEL_ANNOUNCE_IP}
sentinel announce-port 26379

# Monitor master instances
sentinel monitor technovastore-master-1 redis-master-1 6379 2
sentinel monitor technovastore-master-2 redis-master-2 6379 2
sentinel monitor technovastore-master-3 redis-master-3 6379 2

# Authentication
sentinel auth-pass technovastore-master-1 ${REDIS_PASSWORD}
sentinel auth-pass technovastore-master-2 ${REDIS_PASSWORD}
sentinel auth-pass technovastore-master-3 ${REDIS_PASSWORD}

# Timeouts and thresholds
sentinel down-after-milliseconds technovastore-master-1 5000
sentinel down-after-milliseconds technovastore-master-2 5000
sentinel down-after-milliseconds technovastore-master-3 5000

sentinel parallel-syncs technovastore-master-1 1
sentinel parallel-syncs technovastore-master-2 1
sentinel parallel-syncs technovastore-master-3 1

sentinel failover-timeout technovastore-master-1 10000
sentinel failover-timeout technovastore-master-2 10000
sentinel failover-timeout technovastore-master-3 10000

# Logging
loglevel notice
logfile ""

# Security
requirepass ${REDIS_PASSWORD}

# Notification scripts (optional)
# sentinel notification-script technovastore-master-1 /etc/redis/notify.sh
# sentinel client-reconfig-script technovastore-master-1 /etc/redis/reconfig.sh